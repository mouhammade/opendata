import { Injectable } from '@angular/core';
import {AngularFirestore} from '@angular/fire/firestore';
@Injectable({
  providedIn: 'root'
})
export class MapService {

	private _parcelles = {"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"EPSG:4326"}},"features":[{"type":"Feature","id":1,"geometry":{"type":"Polygon","coordinates":[[[-17.344628180999962,14.775183521000031],[-17.342448832999935,14.774993795000057],[-17.34247411399997,14.77735162700003],[-17.344572630999949,14.777464601000077],[-17.344628180999962,14.775183521000031]]]},"properties":{"OBJECTID":1,"Id":0,"surface":5.9172284718499997,"id_parcel":1,"Shape_Length":0.0089288704410140363,"Shape_Area":4.9634504273202274e-006}},{"type":"Feature","id":2,"geometry":{"type":"Polygon","coordinates":[[[-17.344572630999949,14.777464601000077],[-17.34247411399997,14.77735162700003],[-17.342501695999943,14.779923580000059],[-17.344513249999977,14.779903145000048],[-17.344572630999949,14.777464601000077]]]},"properties":{"OBJECTID":2,"Id":0,"surface":6.1384981012599997,"id_parcel":2,"Shape_Length":0.0091245813604014497,"Shape_Area":5.149110265755106e-006}},{"type":"Feature","id":3,"geometry":{"type":"Polygon","coordinates":[[[-17.347560163999958,14.775438735000023],[-17.344628180999962,14.775183521000031],[-17.344572630999949,14.777464601000077],[-17.347541271999944,14.77762438600007],[-17.347560163999958,14.775438735000023]]]},"properties":{"OBJECTID":3,"Id":0,"surface":7.8645205755600003,"id_parcel":3,"Shape_Length":0.010383496554915267,"Shape_Area":6.596848374056296e-006}},{"type":"Feature","id":4,"geometry":{"type":"Polygon","coordinates":[[[-17.347541271999944,14.77762438600007],[-17.344572630999949,14.777464601000077],[-17.344513249999977,14.779903145000048],[-17.347521842999981,14.77987255000005],[-17.347541271999944,14.77762438600007]]]},"properties":{"OBJECTID":4,"Id":0,"surface":8.3521278071600005,"id_parcel":4,"Shape_Length":0.010669201445778478,"Shape_Area":7.0059329673177542e-006}},{"type":"Feature","id":5,"geometry":{"type":"Polygon","coordinates":[[[-17.350903536999965,14.777805311000066],[-17.353149671999972,14.777926149000052],[-17.353207045999966,14.77593015900004],[-17.350935843999935,14.775732523000045],[-17.350903536999965,14.777805311000066]]]},"properties":{"OBJECTID":5,"Id":0,"surface":5.4865473960499997,"id_parcel":5,"Shape_Length":0.0085990220203041173,"Shape_Area":4.6021506178175457e-006}},{"type":"Feature","id":6,"geometry":{"type":"Polygon","coordinates":[[[-17.350903536999965,14.777805311000066],[-17.350871850999965,14.779838437000024],[-17.353095356999972,14.779815768000049],[-17.353149671999972,14.777926149000052],[-17.350903536999965,14.777805311000066]]]},"properties":{"OBJECTID":6,"Id":0,"surface":5.22812794725,"id_parcel":6,"Shape_Length":0.0083967769855094691,"Shape_Area":4.3854261291417211e-006}},{"type":"Feature","id":7,"geometry":{"type":"Polygon","coordinates":[[[-17.349379028999977,14.777723283000057],[-17.350903536999965,14.777805311000066],[-17.350935843999935,14.775732523000045],[-17.349456731999965,14.775603801000045],[-17.349379028999977,14.777723283000057]]]},"properties":{"OBJECTID":7,"Id":0,"surface":3.7598510644099998,"id_parcel":7,"Shape_Length":0.0072053613890889177,"Shape_Area":3.1537926562041568e-006}},{"type":"Feature","id":8,"geometry":{"type":"Polygon","coordinates":[[[-17.349456731999965,14.775603801000045],[-17.347560163999958,14.775438735000023],[-17.347541271999944,14.77762438600007],[-17.349379028999977,14.777723283000057],[-17.349456731999965,14.775603801000045]]]},"properties":{"OBJECTID":8,"Id":0,"surface":4.7991444705399999,"id_parcel":8,"Shape_Length":0.0080507922414364778,"Shape_Area":4.0255658241503151e-006}},{"type":"Feature","id":9,"geometry":{"type":"Polygon","coordinates":[[[-17.349379028999977,14.777723283000057],[-17.349300899999946,14.779854440000065],[-17.350871850999965,14.779838437000024],[-17.350903536999965,14.777805311000066],[-17.349379028999977,14.777723283000057]]]},"properties":{"OBJECTID":9,"Id":0,"surface":3.8439947088099999,"id_parcel":9,"Shape_Length":0.0072637072549143408,"Shape_Area":3.2244044565494221e-006}},{"type":"Feature","id":10,"geometry":{"type":"Polygon","coordinates":[[[-17.349379028999977,14.777723283000057],[-17.347541271999944,14.77762438600007],[-17.347521842999981,14.77987255000005],[-17.349300899999946,14.779854440000065],[-17.349379028999977,14.777723283000057]]]},"properties":{"OBJECTID":10,"Id":0,"surface":4.7230379124799997,"id_parcel":10,"Shape_Length":0.0080004018605725376,"Shape_Area":3.9617677303456889e-006}}]};

  constructor(private afs: AngularFirestore) {
 	const  test = [{"type":"Feature","id":0,"geometry":{"type":"Polygon","coordinates":[[[-17.432770907403246,14.674465915830584],[-17.433569705808395,14.673855189334857],[-17.43383231149274,14.674162558453597],[-17.433982431192259,14.674326750364365],[-17.434131224580373,14.67440459545525],[-17.436505966710822,14.67462549204782],[-17.437979578264049,14.674755193393937],[-17.437935766742338,14.673632245771438],[-17.437902631869989,14.672417405411336],[-17.437863059678747,14.671325036586936],[-17.437794320092546,14.669945256269296],[-17.436792382654044,14.67003472287054],[-17.43487439418854,14.670125659826832],[-17.434069534726561,14.670170139571843],[-17.432939208940677,14.670222813733558],[-17.432995100296896,14.671307789225605],[-17.432991296756057,14.67130791940555],[-17.432609184576101,14.671329808376782],[-17.43266057175083,14.672997946533021],[-17.432688229387537,14.67401374981354],[-17.432688466081437,14.674035156831902],[-17.432723007496136,14.674397672397834],[-17.432770907403246,14.674465915830584]]]},"properties":{"FID":0,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"008","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":1,"geometry":{"type":"Polygon","coordinates":[[[-17.433433449393739,14.675909217859488],[-17.433757448444506,14.675717382391054],[-17.433814332055039,14.675716786141582],[-17.433843024114918,14.675734913801067],[-17.434222128191497,14.676203754784593],[-17.434680017801583,14.676587937578313],[-17.43507491433089,14.676747664416492],[-17.435286931527404,14.676860889119828],[-17.435596263133807,14.677062705299184],[-17.435996182211849,14.677340626455978],[-17.436141375041405,14.677411551812693],[-17.43637882941367,14.677659469202375],[-17.436606051286603,14.67795546164359],[-17.436763536073364,14.678164108977979],[-17.436920992152146,14.678370136741181],[-17.437053157030554,14.678546709592965],[-17.437182539238655,14.678723401885833],[-17.437556495114748,14.679304395483966],[-17.437580069978697,14.680217255238269],[-17.437604407978299,14.680169031716675],[-17.437759017464753,14.679891976350246],[-17.43783512820826,14.679767146953733],[-17.437903488590869,14.679688289166826],[-17.437980289751483,14.679617382539744],[-17.438107998584801,14.679525796490458],[-17.438107438822755,14.679500418211711],[-17.438079227440422,14.678847591847079],[-17.438060338895475,14.678190150763132],[-17.438027285422802,14.677519037113505],[-17.438008105778774,14.676843622297728],[-17.437971529216846,14.676063872381814],[-17.438045351139351,14.67608432597557],[-17.437979578264049,14.674755193393937],[-17.436505966710822,14.67462549204782],[-17.434131224580373,14.67440459545525],[-17.433982431192259,14.674326750364365],[-17.43383231149274,14.674162558453597],[-17.433569705808395,14.673855189334857],[-17.432770907403246,14.674465915830584],[-17.433425489261563,14.675525195246948],[-17.433433449393739,14.675909217859488]]]},"properties":{"FID":1,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"009","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":2,"geometry":{"type":"Polygon","coordinates":[[[-17.433433449393739,14.675909217859488],[-17.433428918616876,14.676388946200609],[-17.434976708500781,14.679177358275973],[-17.43644445809992,14.681874542547604],[-17.436493752571689,14.681959482142005],[-17.437565472007474,14.6839739032295],[-17.437732418483865,14.684382451541063],[-17.437876896212707,14.684739925362088],[-17.437899176380292,14.684773928286392],[-17.438007533906912,14.685037742618704],[-17.43808113078294,14.685204992573976],[-17.438327885757118,14.685135642292307],[-17.438304768845406,14.684473910043055],[-17.438271762659628,14.683807493886246],[-17.438252474410678,14.683122685864834],[-17.438223608360229,14.682411058564577],[-17.438204616194668,14.681744495006546],[-17.438167030616704,14.681091767306794],[-17.438143802093471,14.680461562840158],[-17.438114936138554,14.679749754624453],[-17.438107998584801,14.679525796490458],[-17.437980289751483,14.679617382539744],[-17.437903488590869,14.679688289166826],[-17.43783512820826,14.679767146953733],[-17.437759017464753,14.679891976350246],[-17.437604407978299,14.680169031716675],[-17.437580069978697,14.680217255238269],[-17.437556495114748,14.679304395483966],[-17.437182539238655,14.678723401885833],[-17.437053157030554,14.678546709592965],[-17.436920992152146,14.678370136741181],[-17.436763536073364,14.678164108977979],[-17.436606051286603,14.67795546164359],[-17.43637882941367,14.677659469202375],[-17.436141375041405,14.677411551812693],[-17.435996182211849,14.677340626455978],[-17.435596263133807,14.677062705299184],[-17.435286931527404,14.676860889119828],[-17.43507491433089,14.676747664416492],[-17.434680017801583,14.676587937578313],[-17.434222128191497,14.676203754784593],[-17.433843024114918,14.675734913801067],[-17.433814332055039,14.675716786141582],[-17.433757448444506,14.675717382391054],[-17.433433449393739,14.675909217859488]]]},"properties":{"FID":2,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"017","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":3,"geometry":{"type":"Polygon","coordinates":[[[-17.44365979474119,14.680390155258044],[-17.443647977851452,14.680246590703597],[-17.442727989932401,14.679203331443494],[-17.441334225279913,14.677582480168168],[-17.44056930545635,14.676670009410438],[-17.439485904733704,14.676420688502631],[-17.438045351139351,14.67608432597557],[-17.437971529216846,14.676063872381814],[-17.438008105778774,14.676843622297728],[-17.438027285422802,14.677519037113505],[-17.438060338895475,14.678190150763132],[-17.438079227440422,14.678847591847079],[-17.438107438822755,14.679500418211711],[-17.438107998584801,14.679525796490458],[-17.438114936138554,14.679749754624453],[-17.438143802093471,14.680461562840158],[-17.438167030616704,14.681091767306794],[-17.438204616194668,14.681744495006546],[-17.438223608360229,14.682411058564577],[-17.438252474410678,14.683122685864834],[-17.438271762659628,14.683807493886246],[-17.438304768845406,14.684473910043055],[-17.438327885757118,14.685135642292307],[-17.438827791454944,14.684392679146567],[-17.439600748435268,14.683756233426029],[-17.439885003209909,14.683517624691069],[-17.440248288798909,14.683194031555162],[-17.440286004221143,14.68316373412525],[-17.440545783269858,14.682955309850719],[-17.441493652088486,14.682244065977844],[-17.442604241882638,14.68133353382412],[-17.44365979474119,14.680390155258044]]]},"properties":{"FID":3,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"015","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":4,"geometry":{"type":"Polygon","coordinates":[[[-17.44056930545635,14.676670009410438],[-17.440820151271517,14.676727716175305],[-17.442398133167458,14.677070292974248],[-17.44299039478409,14.676666678832067],[-17.444089103681591,14.675904614269646],[-17.443667796469732,14.675523048262116],[-17.443550375941903,14.675370714877529],[-17.443310261165003,14.6750507464315],[-17.443209128796376,14.674944402492656],[-17.443117892019316,14.674776436368347],[-17.442978421591658,14.674527134297859],[-17.442683648619347,14.674023456876236],[-17.442554892604996,14.67379454770513],[-17.442294000725845,14.673500361022446],[-17.442201165363269,14.673397271589002],[-17.442198215007593,14.673399018979653],[-17.441948889427589,14.673202000808674],[-17.441588944168419,14.67294670498652],[-17.4415846295514,14.672942594943128],[-17.441229133778961,14.672678398831279],[-17.441102880561267,14.672490835598623],[-17.440693320490997,14.67131816586539],[-17.440178560090096,14.669863941656322],[-17.440159548915052,14.669823309951303],[-17.438291124766479,14.669922606871143],[-17.437844847110306,14.669940660878142],[-17.437794320092546,14.669945256269296],[-17.437863059678747,14.671325036586936],[-17.437902631869989,14.672417405411336],[-17.437935766742338,14.673632245771438],[-17.437979578264049,14.674755193393937],[-17.438045351139351,14.67608432597557],[-17.439485904733704,14.676420688502631],[-17.44056930545635,14.676670009410438]]]},"properties":{"FID":4,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"010","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":5,"geometry":{"type":"Polygon","coordinates":[[[-17.450458226879416,14.674377769307577],[-17.45004984285163,14.673982168168004],[-17.449724140706323,14.673819208374844],[-17.449142092733183,14.673521011088607],[-17.448526026133575,14.673201309845284],[-17.448230752871691,14.67309556986959],[-17.448128731113776,14.673059517919095],[-17.447897949480357,14.672978120254575],[-17.447698292274239,14.672891516217428],[-17.446492130640053,14.672308559559252],[-17.445463706281462,14.672085785686457],[-17.444983781288233,14.671999058677148],[-17.444449942440635,14.672004678201187],[-17.444254407335826,14.672088489182753],[-17.443893870630713,14.672323088818837],[-17.443279745291662,14.672712299260056],[-17.442838559000975,14.672988667728156],[-17.442478083277088,14.673229046364375],[-17.442201165363269,14.673397271589002],[-17.442294000725845,14.673500361022446],[-17.442554892604996,14.67379454770513],[-17.442683648619347,14.674023456876236],[-17.442978421591658,14.674527134297859],[-17.443117892019316,14.674776436368347],[-17.443209128796376,14.674944402492656],[-17.443310261165003,14.6750507464315],[-17.443550375941903,14.675370714877529],[-17.443667796469732,14.675523048262116],[-17.444089103681591,14.675904614269646],[-17.444807637919855,14.676542220005194],[-17.444960803149304,14.676695711799006],[-17.445158061654841,14.676883517938927],[-17.445302793881574,14.677021380015203],[-17.445614770768113,14.677318546986745],[-17.445999206161968,14.677688663067853],[-17.446321793385458,14.677992636163042],[-17.447395284134576,14.67704433139364],[-17.448592429016848,14.675965658204085],[-17.449693146474846,14.675044650872987],[-17.450458226879416,14.674377769307577]]]},"properties":{"FID":5,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"013","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":6,"geometry":{"type":"Polygon","coordinates":[[[-17.440159548915052,14.669823309951303],[-17.440178560090096,14.669863941656322],[-17.440693320490997,14.67131816586539],[-17.441102880561267,14.672490835598623],[-17.441229133778961,14.672678398831279],[-17.4415846295514,14.672942594943128],[-17.441588944168419,14.67294670498652],[-17.441948889427589,14.673202000808674],[-17.442198215007593,14.673399018979653],[-17.442201165363269,14.673397271589002],[-17.442478083277088,14.673229046364375],[-17.442838559000975,14.672988667728156],[-17.443279745291662,14.672712299260056],[-17.443893870630713,14.672323088818837],[-17.444254407335826,14.672088489182753],[-17.444449942440635,14.672004678201187],[-17.444983781288233,14.671999058677148],[-17.445463706281462,14.672085785686457],[-17.446492130640053,14.672308559559252],[-17.447197906136573,14.671015210560588],[-17.447168220409896,14.670991377964389],[-17.446829036108063,14.67061364124841],[-17.446289607516295,14.669834885161563],[-17.446124023065483,14.669293016138861],[-17.445900337035166,14.668907076655866],[-17.445518187999426,14.668619878933365],[-17.445218830304725,14.66860361558189],[-17.445075777315928,14.668524546492772],[-17.444732274337259,14.668376901699533],[-17.442420746948201,14.669133414314237],[-17.442178692239793,14.669214821732233],[-17.442044258549661,14.669260047544588],[-17.441942083993748,14.669293642286766],[-17.441871231667971,14.66931480283208],[-17.441562537799445,14.669420758632942],[-17.441128255999704,14.669557934843985],[-17.441016289195986,14.669595606868091],[-17.440171698726701,14.669822640300257],[-17.440159548915052,14.669823309951303]]]},"properties":{"FID":6,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"012","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":7,"geometry":{"type":"Polygon","coordinates":[[[-17.432609184576101,14.671329808376782],[-17.432546462665297,14.671366518641017],[-17.432310925363673,14.671279283431881],[-17.432217160189346,14.67113348020529],[-17.432115825715456,14.670302758606255],[-17.431479203790072,14.670309423930355],[-17.430516524043799,14.670376582903703],[-17.428731128829714,14.670499315169513],[-17.428557654328664,14.670511239483167],[-17.427779436842883,14.670592768025644],[-17.427433464006558,14.671126443371934],[-17.427204043710791,14.671593662302522],[-17.426994576868324,14.67290359608433],[-17.427651299866991,14.673030311622261],[-17.428436602075983,14.673171696864207],[-17.428439730180937,14.673169225089351],[-17.428864348165622,14.673256294407834],[-17.428867791542331,14.673257161749818],[-17.429347844024889,14.673363704838241],[-17.429351564791091,14.673364478935039],[-17.430085521974938,14.673495193775285],[-17.430089240748927,14.673495787209214],[-17.430999281051175,14.673646065839691],[-17.43100290902909,14.673646840879769],[-17.431341604186343,14.673718363790728],[-17.431770254663974,14.673809088996171],[-17.431773789850652,14.673809864995098],[-17.432684840092641,14.674034562470034],[-17.432688229387537,14.67401374981354],[-17.43266057175083,14.672997946533021],[-17.432609184576101,14.671329808376782]]]},"properties":{"FID":7,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"006","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}},{"type":"Feature","id":8,"geometry":{"type":"Polygon","coordinates":[[[-17.44365979474119,14.680390155258044],[-17.443763437257058,14.68030008581904],[-17.444377005028986,14.679756203789637],[-17.445678957228694,14.678588062669167],[-17.446321793385458,14.677992636163042],[-17.445999206161968,14.677688663067853],[-17.445614770768113,14.677318546986745],[-17.445302793881574,14.677021380015203],[-17.445158061654841,14.676883517938927],[-17.444960803149304,14.676695711799006],[-17.444807637919855,14.676542220005194],[-17.444089103681591,14.675904614269646],[-17.44299039478409,14.676666678832067],[-17.442398133167458,14.677070292974248],[-17.440820151271517,14.676727716175305],[-17.44056930545635,14.676670009410438],[-17.441334225279913,14.677582480168168],[-17.442727989932401,14.679203331443494],[-17.443647977851452,14.680246590703597],[-17.44365979474119,14.680390155258044]]]},"properties":{"FID":8,"COMMUNE":"Dakar","id_doc_sec":" ","num_sect":"014","syscol_sec":" ","pd_fisc":0,"nbre_parce":0,"ndre_pa_ev":0,"nbre_p_n_e":0}}];
 	test.map(data => {
	 	let dataStr = data.geometry.coordinates;
	 	data.geometry.coordinates = JSON.stringify({coords: dataStr}) as any;
	  	/*this.afs.collection('sections').add(data).then(ref =>{
	  		ref.update({
	  			id_doc: ref.id
	  		})
	  	})*/
	  })
	}

  get parcelles () {
  	return {...this._parcelles};
  }

  get sections() {
  	return this.afs.collection('sections').valueChanges();
  }

}
